Bueno, bien, como veíamos recién, hemos hecho un... en realidad un ejercicio para ponernos del lado de la ingeniería, del desarrollo y del diseño de estas cosas. Hemos hecho nuestro algoritmo que verifica, al menos que estos que son hosts, podrían tomar la decisión de encaminar su datagrama a través de alguien que los lleve hacia el destino. La pregunta que nos deberíamos hacer es, ¿este algoritmo funcionará si yo lo evalúo como si fuera este router que está acá? Está claro que este algoritmo que hemos hecho nosotros acá, con este nivel de abstracción, funciona para este host. Porque este host lo único que tiene que decidir es si habla con un vecino y si no, ¿qué hace siempre? Este algoritmo que está acá busca si es vecino y si no, ¿qué hace? - Se lo da al gateway. - Se lo da al gateway. Ahora, una de las cosas en las que nos vamos a adentrar, y en realidad es un poco la que hemos estado hablando antes, el routeo es un problema de salto a salto. Este salto que es el host, él pudo tomar su decisión de routeo y dijo "bueno, mirá, todo bien muchachos, te lo doy, yo quiero hablar con él". 120, este algoritmo lo pasa por acá, así tenga cinco interfaces, ¿todo bien? ¿A quién le va a llegar el datagrama en este dibujo? Si yo uso los datos que he dibujado acá, he puesto "che, quiero hablar con, mandarle un datagrama al 120". Así tenga todas estas interfaces que tengo, uso este algoritmo, ¿a quién le cae el datagrama? - Al gateway. - Por eso, pero en este dibujo que tenemos acá, ¿a quién le cae el datagrama? - Al 201. - Al 201. La pregunta es, ¿el 201? ¿Puedo usar este algoritmo? Está medio raro porque debería tener un gateway. La pregunta es, ¿el router ese, siempre tiene que decidir si habla con el 100? ¿Puede decidir tener un solo gateway? No. Lo que pasa es que el router, tiene que decidir, o sea, si por ejemplo, estuviera conectado a otro, en vez de en el dibujo a uno solo, estuviera conectado a otro más, tiene que decidir a cuál mandárselo. Claro que sí. La pregunta es, ¿sirve esto que hemos hecho acá, sirve para ese router? - ¿O no? - No. - Profe. - Sí. Una pregunta, por ejemplo ahí, la máquina que tiene la IP 172, ¿podría llegar a la 120? Como lo hemos planteado acá, no. ¿Por qué? Porque, es buena la pregunta, salvo que esta máquina se volviera un router, pero no es un router, es un host. Es decir que como está dado esto, por eso le acabo, este dibujito que me salió feo, cuando uno usa un símbolo, ¿vieron cuando vimos Mininet? Los routers se dibujan con una caja cuadrada y un simbolito de intercambio, ahora sí. Como este no es un router, si a mí me presentan este diagrama, yo digo, no, mirá, esta máquina solo va a poder hablar en esta red con esta máquina. Porque esta no es un router, no reencamina el datagrama, decide por dónde mandarlo, pero él no es un router. Es decir, no reenvía paquetes. Los que reenvían son estos. Ahora... Sí, perdón, no. Yo quería preguntar, si la máquina 170 es 16, 16.1, ¿manda un paquete que no es para la máquina a la que está conectada? ¿Ese paquete se pierde? Probablemente, probablemente, si yo tengo esta red así, tanto esta máquina como esta máquina no tienen gateway. Porque yo no quiero que salgan de la red. No tienen a quién mandarle la fosa. Claro, solo se pueden comunicar a la máquina esta, digamos, la de médico. ¿Qué es un escenario válido? Ustedes pueden tener una red y decir, mirá, yo no quiero que nadie hable con nadie. Bueno, no se rutea lo que no se quiere contactar. Es la primera regla de seguridad en redes. ¿Para qué le voy a dar gateway si no quiero que salga de la red? Por ejemplo. Igual, en este escenario, que fue solo una manera de irle construyendo complejidad al problema que queremos resolver, tampoco se enrosquen. No es muy común ver una red así, digamos, y no tiene mucho sentido hoy por hoy. Menos pensar redes que no van a tener internet, pero... El problema en el que los quiero de alguna forma inducir o invitar a pensar es A ver si esto deja seleccionar varias cosas. No, no deja seleccionar. No se puede seleccionar. No. Es que... Pensemos en este router. Imagínense que ustedes son... La red es esta que está dibujada acá, ¿no? Y si ustedes son el router, el primer router de arriba, este que está acá, ¿sí? Y efectivamente deberían encaminar el datagrama. ¿Qué deberían hacer con un datagrama que va destinado a las 120? ¿A quién se lo deberían dar? Si quisieran que esto funcione, digamos. Yo quiero que ande. ¿A quién le deberían dar el datagrama? Al siguiente router. A este router. ¿Está bien? ¿Sí? ¿Se ve eso? Sí. Ahora... ¿Eso... ¿Qué manera tiene este router de enterarse de eso? Debería preguntárselo si pertenece a la otra red. Guardar en una tabla. ¿Cómo? ¿Preguntárselo o guardar en una tabla? Porque si nos basamos en esta lógica que está acá, ¿qué miraría él? ¿Qué puede decidir esta lógica que hemos hecho hasta acá? Y decide en base al prefijo, así que... Por eso. Si está en su red o no. Claro, es decir, decide en base al prefijo y si son vecinos a los que está conectado, digamos. Si no, se lo manda a un gateway. Ahora, el escenario que tenemos acá es... De alguna forma este algoritmo está defectuoso porque... Si esto es el mismo IP que tienen que usar todos, la misma lógica IP, me está faltando la manera o algo. Alguien dijo ahí, bueno, este router debería averiguar, por ejemplo, que este host... Está atrás de este router. ¿Sí? Podría preguntar si alguien conoce a 120. Bueno, esa sería una manera, pero está claro que le está faltando información, ¿no? Sí. No tiene manera de saber que... Porque si él supiera, por ejemplo, le llega el paquete y dice "che, yo alguien me dice que para ir a Villa Merced tengo que pasar por San Luis, ah, listo, voy por San Luis, pero me lo tiene que decir alguien". Tampoco, y acá aparecen algunas cosas que vamos a ver más adelante, tampoco está bueno que yo le pregunte a otro porque, no sé, capaz que el destino al que voy está... 100 saltos más allá. Además, imagínense la escalabilidad de eso, ¿no? Imagínense si por cada paquetito que yo desconozco el destino, empiezo a preguntar, voy a hacer un flujo en el cual el esfuerzo que tiene hacer la red va a ser mayor en preguntas que en el paquete en sí, entonces básicamente esto podría, además sería muy fácilmente atacable y colapsaría. Sí, exacto, pero la red... Es haciendo el equivalente de las bifurcaciones, los cartelitos de las bifurcaciones, es como que acá tiene que haber un precerebro grande, la dirección nacional de VLAD, que va y tiene un mapa, dejemos los GPS de lado, ¿no? No tenemos GPS, vamos a ver en modo hippie, de los 70, que va y en cada bifurcación ya tiene todo dibujadito, ya tiene un mapa el cual ve y dice "ah, bueno, ese cerebro dice en esta bifurcación, para ir a San Luis Vas por acá, para ir a Córdoba Vas por acá y ponemos ahí". Y así hacerlo con cada bifurcación, es como que tal que quien tiene que decidir cuál camino seguir cuando encuentre una bifurcación, ya está como grabado, ya está como memorizado eso y no tengo que preguntarlo en el momento y no tengo que contactarme con otras bifurcaciones para preguntarles "che, bifurcación vos conocés" y que a su vez tenga que preguntarle hacia atrás, porque eso nuevamente tendría un problema de escalabilidad sumamente grande. Entonces es como que hay otra capa de más arriba que ya ha instalado estas reglas de ruteo, de bifurcación, las ha pre-instalado. Bien, tratemos… Perdón, tengo una pregunta un poco tonta. ¿Los switches tienen algo que ver con lo que acaba de explicar el profe? Porque lo había leído, o si mal no recuerdo, los switches tenían como una memoria que mapeaban direcciones y las hacían como un look up. ¿Tiene algo que ver con el tema que están hablando o no? Hay un encaminamiento, pero es un encaminamiento de tramas en capa 2. Es como que los switches recuerdan de decir "ah, yo vi esta MAC acá" entonces para no hacer un flooding en todos los puertos, yo ya sé que esa MAC está ahí, cuando alguien me ponga en capa 2, yo switch no saber IP, yo solamente manejar MACs, me pone esa MAC destino, yo lo vi atrás de esa puerta, entonces lo mando por ese puerto. Y no molesto al resto de los puertos. Pero esto es bien capa de enlace, lo que estamos hablando con los switches. Esto es un problema en capa de red. Tiene una ligera analogía, pero es fundamentalmente distinto a la manera de resolverlo. Bien, bien. Perfecto. Estoy tratando de ver si me deja… no me deja… no puedes copiar esto. No puedo copiar. ¿En serio? Ah, para trasladarlo a la próxima página. Ah, duplicar. Bastante arcano, ¿no? Duplicar esto… ah, duplicás. Esto nada más. Qué raro. Con la flechita lo seleccionás y le das control + C, a ver si me voy a la próxima página. Pero te deja sumar más de uno. Ahí va, ahí te lo copié en la segunda página, que me parece que era lo que querías, ¿o no? No, el dibujo, quiero copiar el dibujo, pero tendrías que ir uno por uno. Ah, para, para. Y generalmente con shift… Ah, mirá, uh, no, perdón, con control, control. Uy, qué bárbaro que no te deja seleccionar región, a ver, para… Wow, tenés razón, Chen, qué bosta. Acá vamos a tener que usar a un amigo tuyo. ¿Cuál? ¿Cuál? El… este, bueno, por lo menos este amigo nuestro. ¿De qué me estás hablando este buen hombre? Este buen amigo, a ver si nos va a dejar… Es bastante bestiuzín la manera, es bastante con el martillazo, pero… A ver si pega, uh, buenísimo. Uno es vectorizado y el otro es pixelado, pero bueno. Bueno, arrancamos con el… Se ve la pantalla, ¿no? ¿Sí? Sí. Sí, perfecto, perfecto. La generalización o la razón del problema sería nuestra versión de algoritmo funcionó ok para esto, pero estaríamos teniendo un problema al momento de poder evaluar qué hacer acá. Y como bien decía Juanjo, está claro que… Es decir, la pregunta es, tenemos un problema de… Si supiéramos… Al momento de evaluar el destino contra la información correcta, en definitiva, una vez que yo a este router lo doto de la información necesaria para decidir, después, ¿qué caminos tiene para optar a nivel de capa 2? Este router, que está acá. Este. ¿Sí? Imagínense que de alguna forma le podemos describir y decir "che, no, mirá, la red 100 está para este lado, y la red 1 está para allá, la red 172 está para allá". Una vez que lograra averiguar eso, después, ¿qué decisión tiene que hacer al escribir los paquetes? ¿Cuántas opciones tiene? Y tiene que colocar la MAC del siguiente salto. Por eso, pero según el dibujo que tenemos, ¿cuántas opciones tiene siempre? Más allá de toda la red que haya. Dos. ¿O va para allá, o va para allá? Es decir que, al momento de terminar encaminando, ¿de qué depende? Pero ¿qué sentido tiene pegarla a vuelta? ¿Sería una sola opción? No, porque si este router recibe un paquete de la 120 a la 198, 108, 1, 10. El routeo es un problema bidireccional. Una cosa es mandar un paquete así, pero este le va a responder y va a ver qué mandar este así. Sí, pero la 1, 10 no estaría conectada con el router. Pero está acá. O te lo digo al revés. Yo puedo recibir un paquete que va a la 120, va así. Y si este le responde a la 220, va así. Entonces también necesita tener la información para decir "ah, no, la red 200 está para allá y la red 100 está para allá". Ya, claro, sí, sí. Por eso, entonces, no entendí. Perdón. Pero si, digamos, tengo dos links y por uno me vino el mensaje, no tendría sentido volver a mandarlo por el mismo. Eso es lo que quería decir. No, está bien, pero vos estás pensando solo en una red que solamente encamina en este destino no sirve. Vos, a respuesta de ese paquete, vas a recibir uno al revés. Claro, sí, sí. Vas a tener que saber que estás conectado a esta red. La pregunta es, ¿en base a qué creen que dependen las cantidades de opciones en capa 2? ¿De qué es dependiente? De los enlaces que haya. De los enlaces que haya. Es decir, cuantos más bifurcaciones haya acá, van a poder ser las opciones en capa 2 que yo tenga después para el próximo salto. Sí. Y la decisión de capa 2, ¿qué va a terminar siendo parecida a este algoritmo? Cuando sepa por qué lado tengo que irme, ¿qué hago después? Buscar el vecino. Busco la Mac. Entonces, pensemos dos minutos a ver que a esto, como bien decía Juanjo, ¿qué es lo que le está faltando para que nosotros podamos hacer que el algoritmo tome la decisión? Si yo soy este router ahora, imagínense por un momento que soy este router, el que tiene la IP 201 y 10.10.1. Y necesitas saber para dónde está la red del host con el que quieras comunicarme. Sí. Sí. Eh... Necesitas saber... Ok, pero ¿qué es lo primero que yo tengo apenas me prenden? Naturalmente, este router, ¿qué tiene apenas lo prenden? Como información de IP. ¿Qué me dijeron recién? Yo a este router lo prendo y él, ¿qué sí sabe perfectamente de él? O ¿qué le debería poner como mínimo? La Mac está en el hardware, pero en esta red, si yo lo he configurado así, ¿qué tiene sobre cada enlace? Sabe a qué red pertenece. Por eso, esto tiene una configuración que dice, mira, yo tengo la ETH 0, que tengo la ETH 192, ETH 108, ETH 201, ¿sí? /24, tengo la ETH 1, que tengo la 10.10.10.1/24. Yo, suponiendo que una es ETH 0 y otra ETH 1, ¿a estas dos redes qué característica natural tengo? ¿Son redes que están lejos de mí? ¿Yo estoy ahí? ¿Estoy conectado o no estoy conectado a esas redes? ¿Cómo sería? ¿Sabe qué pertenece a esas redes? Claro, es decir, yo tengo un enlace a estas redes, yo estoy conectado directamente a estas redes, ¿está bien? Tengo un link, son mi interfase, como dijeron ustedes. ¿Está bien? Sí. ¿Puedo decirles algo? Si yo les pregunto, ok, este es el router, y nosotros tenemos que hacer que esto, de alguna manera, tenga la capacidad de que yo le describa información de ruteo, necesito en algún lugar, como alguien dijo, como decía Juanjo, escribir esos cartelitos con información que es local a cada router en algún lugar. ¿Esa información, a los efectos de este algoritmo, es algo que va a averiguar o debería ser configuración previa? ¿Cómo, profe? Vamos de nuevo, les pido que prendan la neurona porque los veo medio lentos. Les decía, para que esto pueda tomar la decisión de rutear, nosotros hemos llegado a la conclusión que acá falta la capacidad de poder decirle a cada router por ejemplo, la red destino, que sería la 100, está por este router que está acá, por el router 110, por acá. La pregunta es, ¿eso, si yo tengo que implementarlo en un algoritmo, es dato, es configuración, es algo que ya debería estar precargado, algo que va a averiguar en ese momento? ¿Se averigua? No, tiene que estar configurado. ¿Cómo averiguamos? ¿Cómo averiguaría si, por ejemplo, Eso es configuración previa. Por eso, configuración previa. Y la pregunta es, si yo tengo que, es configuración previa, no hay forma que lo averigue en ese momento, porque lo que acaba de explicar Juanjo recién no escalaría, si cada paquete que me llega, tengo que averiguar dónde está, los routers se vuelan. Es como si yo llegara acá a bifurcación y le tuviera que pedir en ese momento a un tipo de realidad que venga y me escribe el cartel. O ya están hechos los carteles. Están hechos los carteles. Entonces, yo tengo que ponerle a cada router, recuerden que estoy parado, estoy acá. Y esto es súper importante, estoy parado en este router de acá, pensando el problema de este router. ¿Sí? Este router. ¿Qué le tendría que describir? Es decir, yo le tengo que poder describir un destino. Lo que nos está faltando es la posibilidad de describir la información de ruteo en definitiva, de que este destino está a través de las opciones que tengo en este caso. Entonces, eso construye una información de ruteo que va a parar a lo que se llama una tabla de ruteo. La tabla de ruteo es configuración local a cada dispositivo que toma decisión de encaminamiento. ¿Y esa tabla de ruteo qué describe? Destinos que quiero alcanzar y quién me puede llevar a esos destinos. Esa es la información más importante que ustedes tienen que aprender. Tienen que describir el destino y quién los puede llevar a ese destino. Entonces, si yo le digo "yo estoy en ese router, ¿qué destinos puedo querer alcanzar?" Bueno, obviamente estos son dos destinos a los que estoy directamente conectado. Ahora, ¿qué otros destinos tengo? La 100.20, la 1.10. Por eso, ¿hay alguna manera de describir? Voy a tener que escribir. 192, 118, 120. Y, por ejemplo, si yo quisiera llegar a la 120, desde donde estoy parado, ¿quién me puede llevar ahí? Internet 1. Bien. Pero, en realidad, ¿a quién a nivel IP, quién me puede llevar a la 120? Está bien lo de Internet 1, yo lo dejaría ahí. Bien, me voy por la Internet 1. Esa es la decisión por la que voy a terminar saliendo. Pero, si acá en la Internet 1 yo tuviera a varios otros routers, o varios otros miembros de esta red. Pues... Ahí se encarga ese otro router de tomar después la decisión. Por eso la pregunta es... Es decir, está bien, yo puedo tener acá, sobre la Internet 1, muchos vecinos de la red 10.10.10. Ahora, ¿quién es él específicamente? ¿Todo ello o el que me puede llevar? Es decir, tengo que... ¿Quién? El 10.10.10.2. El 10.10.10.2. Es decir, que en realidad es como si para ese destino, mi gateway fuera el 10.10.10.2. ¿Sí? Sí. Ok. Ahora, si quisiera ir a la 101, tengo que volver a poner acá, 192, 108, 101. ¿Qué es? ¿Por dónde voy? Por Internet 1 también. Internet 1, y tengo que poner de nuevo, 10.10.10.2. ¿No hay alguna manera que yo pueda decir, si todos ellos van por el mismo lado, qué debería escribir yo? Decir, che, mirá, todos, de las cosas que hemos aprendido, tengo manera de decir, ah, mirá, todos estos son la misma red. Y van todos por ahí. Y no podríamos crear una dirección con un puerto físico. O sea, yo... Hay alguien que le encantan los switches, ese es David Vido. Te pido, por favor, que empecé a pensar en otra capa porque te vas a morir de hambre. Sí. Salí de la cacerola de la capa 2 porque te vas a morir de hambre. ¿Qué problema me permite describir, de qué manera me puedo describir a todos los que son miembros de la red? De las 101, 102, 120... Con la máscara. Claro. Si yo digo, che, mirá, todos los que son 100... 0/24, si quiero ponerlo. O 100/24, como les guste más. Todos van a irme a parar por ahí. ¿Está bien? Eso describe, de hecho para eso estudiamos CIDR. Hicimos todo lo que vimos antes. Para poder describir... De hecho esa es la razón del CIDR. Poder describir múltiples destinos de ruteo. Es decir, yo acá le estoy diciendo, mirá, todos los flacos de la red 100 se van para este router y se van por acá. Imaginémonos a los efectos didácticos. Ya sabemos que en la máquina... Ya que estamos en ese viaje, estaría bueno rever las dos primeras entradas, que son 0.1/24, para ya oficializarlas en 0.0. O no sé si ibas a ir sobre eso después. No, no, no, estaba... Que me digan... Si yo quisiera describir desde donde estoy parado, imagínense que por un instante vamos a transformar a Don... A ver si lo puedo hacer esto, sí. Vamos a transformar a este aparato en un router también. Así lo hacemos un poco más jugoso. Resulta que este muchacho se volvió router también. Entonces yo estoy parado en este router de acá, ¿no? ¿Qué otro destino puede ser que a mí me toque tratar de alcanzar? Y la red 192.168.1 y la 172. Bien, entonces acá va a decir la 192.168.1.0/24. ¿Por dónde se va a ir? Ethernet 0. ¿Y quién me va a llevar ahí? El 192.168.200. 201. ¿Todos ven esto que estamos viendo? Es decir, estoy escribiendo el cartelito de "che, mirá, si estoy en Mendoza y me voy a ir a la ciudad de la punta, tenés que ir por Villa Mercedes". ¿Profe, ese no sería 220? 220, perdón, sí. Es 220. Es la IP del otro lado, sí, 220, perdón. Es "¿Quién me puede llevar en IP a ese destino?" ¿Y cuál sería el otro destino que me puede llegar a caer, que quisiera alcanzar desde ahí? La 172. 172.16.16.0/24. ¿Por dónde se va a ir? Ethernet 0. ¿Y quién me puede llevar? Ese mismo, 192.168.120. Bien, ¿por qué no es el 1620? ¿Está bien lo que dice él? El 1620 sería a partir del otro router. Por eso, pero si yo pongo acá 172.16.16.20. Porque no es el vecino de intento. No es vecino mío, nunca puedo ir a un destino si no uso una IP que es vecina mía que la pueda alcanzar con alguno de los enlaces en los que estoy vecino. Entonces, esto no se puede hacer. No va a andar, porque estoy tratando de llegar a un destino que no soy vecino. 220. Entonces, si este es el mismo gateway, ¿podría poner una sola ruta acá? Como lo pasó recién. ¿O no? No, porque son dos redes distintas. Después se difurca. Bien. No. La respuesta es, son redes nada que ver. Son distintas redes. No, no comparten. Lo único que compartirían para que yo meta una sola ruta es el número uno. Entonces tendría que poner una 1/8 para describir a todos los demás. Una cosa, o no sé. Perdón, 1/8 no. Tendría que cortar la máscara en un 1/2 bit. Bien. Si yo tengo esta información, que es la del router, voy a borrar al tipito este. ¿Por qué no me lo deja borrar ahora? Con la goma. Tiene que hacerlo, me parece, profe. Ah, con la goma. Gracias. Bien. Esta es la información de ruteo en el R1. ¿Sí? Y vamos a poner acá, este es el R1. ¿Ok? Se ve eso, ¿no? La pregunta es, entonces, si ustedes lo piensan por... No sé si quería agregar algo, Juan, lo que me decías recién de los números para... No, no, no. Solamente las primeras dos entradas que dicen .1/24. Si lo estamos expresando en direcciones de red, arreglarlas a que sean .0/24. No sé si querías hacer alguna rosca más alrededor de eso. No, bueno, no quería desambiguar como era el link, pero lo podemos hacer. Son hiperígenes. Estoy haciendo la tabla de ruteo. Ok. Creo que sirve. La pregunta es, si yo me hago... Quiero terminar de describir la realidad de esto y vamos a decir que... Oh. Me voy a duplicar. ¿Cuál es la realidad de R2? ¿Es la misma tabla de ruteo o él tiene carteles distintos? Tiene carteles distintos. ¿Qué información tiene R2? A ver. Sí, tiene que... ¿Qué es lo primero que le miro a R2? ¿Qué es lo primero que le miro? Que él tiene lo que es miembro, digamos. La información de sus enlaces. ¿Qué enlaces tiene? Él es 10, 10, 10/2/24. Supongamos que esta es la... Este es 0. Tiene link ahí. ¿Qué más tiene link? Con el 92, 101. 101/24. Link. ¿Y todo lo demás que pasa en esta red? ¿Qué más le puede tocar a él tener que alcanzar? Todas las otras redes, pero van a través de la misma... Bueno, pero entonces nos tenemos que... Esto es lo que quiero mostrarle. El ruteo, la información de configuración de ruteo es siempre local. Y eso es lo que cambia salto a salto. Recuerden, los carteles en cada bifurcación son distintos. Entonces, es el mismo mapa, pero la información de ruteo local es diferente. Entonces, describamos cuáles son los destinos que puede querer alcanzar. Díganme uno. Y 172.16.16.1. 16, 16, 1. Bueno, entonces es 0. Si pongo 1/24, ¿es lo mismo que ponga 0/24? No. Y si pongo 124, ¿qué va a haber cuando yo evalúe el /24? ¿Qué le voy a mirar a esto? El prefijo de red. Claro, entonces prácticamente si usted escribe en 100.223.24, acá es lo mismo, porque usted le ha dicho "che, mirá, yo le voy a mirar solo los primeros 24 bits". Bien. ¿Está? Es decir, le estoy describiendo todos los destinos /24. ¿Quién me puede llevar a, si yo estoy en R2, a la red 16.16? El Ethernet 0. Ethernet 0. ¿Y quién es sobre el Ethernet 0 el que me puede llevar? R1. ¿Ah? R1. R1. ¿Qué IP tiene? 10.10.1/24. ¿Es un IP? También. La pregunta es, si yo voy a este, ¿cómo tiene que ser él? Tiene que ser vecino. ¿El 10.10.10.1 es vecino mío? Sí. Sí, porque lo caigo acá. Vamos a preguntarnos otro caso. ¿Quién más puedo querer alcanzar? La red 1. La red 1. Bueno. Sí. ¿Y quién me lleva ahí? El mismo camino. Ajá. ¿Y a quién más puedo querer alcanzar acá para describir a todas las redes que tengo no en el mapa? A la 200. A la 200. Fíjense cómo... Tenemos... Y ya para completar la joda ya le vamos a poner la R3 si quieren. ¿Cuál es la situación de R3? Similar, pero cambiando toda la IP. Tiene 3 links. Profe. Sí. ¿Hay alguna forma de, por ejemplo, un CPU, si le agregás varias placas de red, convertirla en router? Totalmente, claro que sí. Totalmente. Un CPU cuando no es una computadora. Claro. ¿Y a ustedes les caga alguna duda que los routers son computadoras? ¿Tienen router en su casa? Por supuesto. Sí, claro. Mirá esto. Se ve la pantalla, ¿no? Esa es la información de mi ruta por default, es esta. Uf. Uf. Ando por tanto router. Ando por tanto router. Esto es una computadora, ¿o no? Sí. Es una computadora, ¿o no? Porque mira, tiene CPU, cat, proc, CPU info. Tiene memoria RAM. Se hace es un PS, claro. Se hace un PS, tiene procesos. Está corriendo. Tiene un sistema operativo, computadora. ¿No usa swap? Ah. No. No, no, no, no tiene, no le sobra nada para usar swap. Pero lo que les quiero decir es, fíjense, Ippeli, esto tiene varias interfaces. Un poco lo que preguntaba el compañero a ustedes, y efectivamente esto es un router. De hecho es una computadora rara, es un TP-Link Archer, MediaTek. ¿Podrías entrar al router de la cloud? Ya te paso, no sé si lo tenés a mano, ahora ya te paso la IP. Es esta. Estoy adentro. Ah. Estaba mirando otra pantalla. Pero quería darle un avant-premier para que ustedes vean que sí, todos los routers son computadoras. Así que, olvidate. Tenés que tener más de una interfaz para que tenga sentido el routing, aunque sea más de una interfaz lógica. Y tenés que tener un sistema operativo que lo soporte, ¿no? Y que venga preparado para más naturalmente ser un router. Terminamos esta para terminar de hacer la generalización y a ver si encontramos una solución. El R3, ¿qué tiene distinto a los otros? ¿Qué ven usted que tenga distinto? Que tiene tres enlaces directos. Tiene tres enlaces, a ver. 192, 168. .1. .2. 1.20 le pusimos. 1.20/24. Digamos que este es su VTH0 y tiene enlaces. 192, 168, 201, 24. VTH1 link. Y después tiene 172, 16, 16, 20, 24. VTH2 link. ¿Ok? ¿Y quiénes puede querer alcanzar que no conoce? 192, 168, 120. 100. ¿Y todos los vecinos de él? /24. ¿Quién lo lleva ahí? ¿Quién lo puede llevar ahí? Terminé el 2. ¿Es el 2? No, perdón, es el 1. La 200. .0. .1. En realidad el acá es la 200, perdón, acá está mal. Es 220. Y quien lo puede llevar es la 201. Ahora, ¿hay alguna otra red que esté ahí? Fíjense, un caso particular. ¿Qué red le falta poder alcanzar? Que los otros sí lo miran. Si yo lo dejo al R3 así, ¿a quién no va a poder alcanzar nunca? A ver, a los efectos de lo que estamos hablando es... A la 10. Claro, estamos describiendo que lo que le configuremos acá es lo que va a poder alcanzar este router, o va a poder encaminar. Si no está acá, no es alcanzable por el router. Entonces, ¿quién no es descrito yo acá? La 10. 10. 10. 0. 24. ¿Que por dónde se va casualmente? Fíjense, este es un router... También es el 1. Claro. El único que lo puedo sacar de la cacerola donde vive es el 201. Ahora, a lo que quiero llegar, a ver si lo podemos coser antes de que termine el día, es... ¿Qué es lo que está pasando? ¿Qué es lo que está pasando? Claro, digamos que yo ya tengo una información bastante más enriquecida, porque el R1 tiene toda esta información, el R2 tiene toda esta, así que mi configuración es, si yo les tuviera que decir a ustedes, y creo que acá donde me parece que era lo que proponía Juan Jorge recién, ¿cómo guardaríamos esta información en una máquina? ¿Cómo la guardarían? Si la tengo que hacer en un programa, ¿esto qué serían? Una matriz. Una matriz y ¿cuántos campos tendría que tener? El campo, ¿y va acá, Juanjo recién o...? Sí, más o menos, pero va bien, va bien, va bien, en todo caso lo agregamos después si está en contexto. Y tendría la red a la que puedo llegar. Por eso, acá tengo. ¿Y el enlace que tenés que usar? Por eso, pero acá tengo IP, esto es máscara, la interfaz, ¿sí? ¿Y por dónde ir? ¿Qué es otra IP? Si está el link o no. Por eso, y este sería de alguna manera mi próximo salto, es decir, mi destino, mi... ¿Le puedo decir gateway? Es decir, si yo quiero ir a este destino, por ejemplo, a este destino, es decir, quiero ir a alguno de mis otros vecinos, directamente digo, como esto va a ser link, lo contacto, o no. Sí. Entonces, lo que les quiero decir es, esto que está acá, ¿cómo se modelaría en un lenguaje? ¿Con qué estructura lo modelan? Una lista de listas. Bueno, con una RAI bidimensional, digamos, que va a tener un entrada por cada destino que quieran machar. Y en la columna tienen los parámetros, uno es IP, el otro es máscara, el otro es interfaz, el otro es gateway. ¿Se ve? Sí. Por eso, la configuración está en una tabla, en la tabla de ruteo. Está bien. Que es esa. Entonces, imagínense por ahora que a ustedes les cae un datagrama. Como puede ser este datagrama. Este que está acá. ¿Qué pueden hacer usando toda la información que tienen ahí para resolver el problema de encaminarlo? ¿Macheo en dónde está la IP de destino? En qué router y de ahí establezco la conexión, el camino. A ver. ¿Qué tendría que--? Puedo decir, "macheo". ¿Macheo qué hago? Es decir, concretamente, si yo estoy en el router 3 y me llega un paquete que va acá, ¿qué debería hacer con esto? Estoy en el router 3, perdón, es esta. Mi tabla de ruteo va a ser esta, ¿no? Esta. Sí, hay que buscar el prefijo. Tengo que recorrer la tabla. Por eso, tendría que decir, ¿qué es lo que tendría que decir? Para-- Para entrada. Para acá, no sé, entrada en-- No, al revés lo hicimos, en "t" ruteo. ¿Así? Sí. Entonces, ¿por cada entrada qué voy a tener yo? Voy a tener IP, máscara, interfaz y voy a saber si es link o no. ¿Qué voy a decidir comparándolo con lo que tenía acá? Y viendo si-- ¿Qué le tengo que mirar a esto contra esto que está acá? Si es vecino. Si es vecino o, más específicamente, ¿qué voy a mirar ahora? El prefijo. Pero dígame, comparándolo así a mano, a simple vista, ¿qué mirarían ustedes para-- Son un algoritmo. ¿Miran cómo deciden por cuál de estas tienen que irse en base a esta información? Y viendo en la parte de IP, en la columna IP, si tienen el mismo prefijo. Por eso. La que más se parezca. Por eso, pero no, la que más se parezca diría un brujo. ¿El ingeniero qué dice? ¿Qué puedo reutilizar de este código? Y él es vecino o vecino, no me acuerdo cómo se llama la función. O vecino. Pero, bueno, básicamente, ¿qué voy a hacer? Este pedazo de aspecto que está acá, lo voy a necesitar comparar. Es decir, para cada entrada o para cada, vamos a poner ruta, más cortito. En tabla de ruteo voy a mirar si... El primer elemento de la ruta. El predestino con... Ruta, máscara. Sugiero ponerle entrada. ¿Entrada? Me parece clarito que es una línea. Bien. Recuerden que estamos hablando que cada uno de estos tiene IP, máscara, interfaz, gateway. Es decir, yo voy a decir si la IP destino, AND, la entrada que estoy, la máscara, es... ¿Contra qué lo comparo? A la IP nuestra, digamos, el router 3. No, pero por eso, pero estoy haciendo un algoritmo, Guitera, ¿sobre qué? Sobre la tabla. Con cada IP de la tabla. Por eso, pero y el algoritmo acá que estoy poniendo, si ENT, ¿qué tendría que poner acá? ENT IP. ENT IP. Con... ENT... Máscara. Es decir, eso va a comparar si esta IP, la primera vez, va a tomar, voy a decir, che, 120 contra... 120, ¿cae en 120/24? No, ¿cae acá? Es decir, tendría que ir tomando cada una de las entradas de la tabla. Si machea, ¿qué? ¿Qué si? Si machea... Es decir, che, ah, ok. ¿Qué debería hacer yo? Reutilizar el código. Y hacer atraer el código para el otro router que pertenece a ese enlace. ¿Qué debería hacer? Listo, digo que... Agarra la MAC del que es, macheo, digamos. A ver... Me quería caerme. No me escucho. Quiero que me cuenten a ver qué hacemos. Toma la máscara de la IP... De la entrada. Espérate, no. Lo que hace es pedirle al gateway la MAC. Con la línea, como lo hacíamos recién, lo mismo, pero con el gateway en este caso. A ver... Con el gateway, pero... A ver, hagamos... Es decir, acá lo voy a pegar. Pregunta MAC, la habíamos puesto. Sí. ¿De quién? Ent... ¿Qué doble? Pregunta MAC de Ent Gateway. No, ¿verdad? Es Ent IP, y el siguiente es... Se me dieron vuelta los... A ver... Dejémoslo por ahora. Vamos a ver, vamos a ver, vamos a ver... ¿Cómo se llama? De quién fue el gateway, y después qué tiene que hacerle. Mandar... Si averigua la MAC. Sí, se lo manda. ¿Qué tiene que hacer? Mandar la trama a MAC en el datagrama. Ya vamos a ver cómo resolvemos la parte de los que son vecinos directamente conectados. Pero, digamos, para cada entrada en la tabla de ruteo, yo voy a preguntar si la IP destino con la máscara que tengo en la entrada, operada la entrada del IP y la entrada de la máscara, esto me da igual. Debería preguntar la MAC de la entrada que es el gateway, y mandarle la trama de la MAC que yo haya resuelto. Sí. ¿Qué pasaría si nunca machea esto? ¿Qué significa? Que nunca entró acá. Y que no puede llegar. Claro. O que está en un router equivocado y lo tiene que devolver. ¿Cómo que está en el router equivocado? No tiene camino para mandar la IP. Si yo atravieso este bucle, termine este bucle, acá, y salí por acá, es decir, llegué hasta el final y nunca mandé la trama, ¿qué pasó? Es que recorrí toda la entrada de la tabla de ruteo y ninguna abarcaba el destino. ¿Qué es lo correcto en este caso? ¿Qué sería? ¿Lo correcto en qué sentido? No, en términos, si hemos dicho que solo se rutea lo que está descripto en la tabla. Si no está descripto ahí, no se rutea. Si yo le digo notificar, le digo aviso ICMP, ¿qué te damos aquí? No hay ruta, flaco. Para eso, en realidad, acá, cuando manda la trama, estrictamente, si lo viéramos de manera programática, esto no vuelve acá, es decir, acá termina esta entrada. ¿Se entiende o no? Sí, sí. ¿En realidad es un break? Tiene razón el colega. No, perdón, sería un return, colgásele un return. Por eso, pongámosle un return. Bien, acá la única cuestión que nos queda, si quieren de alguna forma, de ilustrar es, bueno, pensemos en esto. Imaginemos este algoritmo, imaginemos que estamos en el router 3, en realidad yo quiero hablar con el 208. Mi destino es 208, vengo acá, digo, para acá, entrada en la tabla de ruteo, digo, bueno, me vengo a la primera, digo, 208. 208, 24, así que queda 200. ¿Es igual a 192, 181? No. No, listo. Es decir que esto no sale por acá, va a la próxima entrada. Toma esta entrada. 208, operado máscara, 220. ¿Es igual? Sí. Lo que yo tendría que hacer es, en esta función, que es la que pregunta la Mac, para este caso particular, en realidad lo que puedo hacer es, si quieren, para que se queden tranquilos, yo puedo decir que, preguntar Mac, que tiene como parámetro, entrada sub-gateway, en realidad es entrar sub-gateway. Yo creo que habría que hacer un if ahí para que quede más claro, me parece, es decir, if gateway igual link. Lo iba a hacer ahí arriba, sí. Pero bueno, voy a eso, voy a eso, como quiera. Ah, perfecto. Acá va a gateway y va a interfaz, ¿no? Ahí está. Bueno, ok. Entonces, si yo acá le pongo "preguntar cosa" y le pongo "entrada sub-interfaz", ¿cuál sería la... si entrada sub-gateway? ¿El link? Sería sub-interfaz, sería. No, lo que les quiero decir es que... Perdón. Le pasa que ahí vas a tener que pasarle la IP. Preguntar Mac, entrada... En el if, profe, que puso si entrada y puso gateway igual a link. Ahí sería si entrada, interfaz. Para tengo interfaz. Ah, gateway y es link, está bien. Y si no es... Se me corrió la columna. Es decir, gateway... Creo que me va a alcanzar, me parece. No me va a ser falta, es decir, piensen que gateway lleva link, como lo hemos hecho, digamos, lleva link o lleva la IP. Entonces si yo pregunto si la entrada sub-gateway es link, ¿qué tengo que hacer? Que lo mande ese link. ¿Ah? Manda la trama. No, estoy averiguando la Mac. Tiene que usar la interfaz. Por eso, pero vamos por partes. Si está link, yo tengo que arpear en ese cable... Ah, ahí no hay que chequearlo simplemente después la IP. Ah, ahora caí lo que decía Juanjo, tenés razón. Acá tengo que mandarle la IP destino, decís vos. Sí. Va a tener, sí. La interfaz va siempre, por eso me parecía hacerlo allá abajo. Tenés razón, tenés razón. Vamos a hacerlo acá abajo. Vamos a hacer... Acá decís vos. Entrada sub-gateway. Exactamente, igual a link. Es link. La Mac, es preguntar la Mac de entrada sub... No, de IP. Destino en la interfaz esa, ¿no? Ahí está, así. Ahora está, perfecto. Perdón, sí, sino me iba a tener que pasar un parámetro más. Tenías razón, perdón. Si no, la Mac va a ser preguntar la Mac de entrada gateway. También en la interfaz, correcto. Entrada interfaz. La pregunta de la Mac, ¿para qué necesitaba la interfaz? Porque yo puedo tener, acá fíjate cómo va cambiando la interfaz. No podés harpear en toda la interfaz a la vez. Claro, sí, sí, tiene sentido. A ver. Fíjense que... Repasamos ahora. Dijimos que queríamos hablar con el 208. Si 208 va a pegar en esta entrada. Va a decir, che, 200 es igual a 200. Entonces, va a agarrar y va a decir, si entrada gateway es link, ok. Va a preguntar la Mac de 208 por la interfaz de TH1. Y después le va a mandar la trama. Es decir que, esta modificación que acabamos de hacer así, ¿qué permite contactar? Los vecinos. Es decir que esta parte del algoritmo así, ya resuelve todo lo que hacía este otro algoritmo. Y esta otra parte del algoritmo que está acá, ¿qué resuelve? Cuando no son vecinos. Todos los demás destinos. Es decir, que esto rutea IP. Y más, rutearía cualquier cosa de cualquier lado de la internet también. Este es el algoritmo de ruteo IP. ¿Dónde está la inteligencia del ruteo entonces? En la tabla. No escucho a mucha gente convencida, pero es correcto. ¿Cómo, perdón, profe, podría repetir? Vamos de nuevo. Este algoritmo, hagamos el ejemplo a ver si sirve. Yo estoy en R3, pero vamos a ver si sirve. Hagamos el ejemplo a ver si sirve. Yo estoy en R3, pero vamos a corrernos a R2 ahora. R2, y resulta que quiero mandarle un paquete a... Estoy en R2, y le quiero mandar un paquete a 172.16.16.1. Si estoy... Vamos de nuevo a R2. La tabla es esta, que está acá. Sí. Veamos. El destino es 16.16.1. Entonces, digo, para cada entrada en tal de ruteo, pregunto, 16.16.1 /24, que sería la primera entrada, me compararía 172.16.16. ¿Es igual a 10.10.10.10? No, es la tercera. No. ¿Sí? Entonces, no entra ninguno. ¿Es igual a 100? No. ¿Es igual a 16.16.16.24? Sí. Es decir que cayó acá adentro. Va a preguntar, "entrada sub-gateway", que sería esta, en este caso, 10.10.10. ¿Es link? No. Es decir que la MAC va a ser... Tiene que agarrar y preguntar la MAC en... La MAC de la IP 10.10.10.1 por la interfaz de TH0. Es decir que va a estar preguntando, está acá, ¿sí? Y está arpeando por esta IP. Le va a responder este router la MAC. Va a tener la MAC y le va a decir, "che, le mando la trama a esa MAC, tomá la trama". Es decir que este se lo va a dar a este. ¿Se ve? Sí. Entonces, ¿dónde reside la inteligencia? En el algoritmo. En el algoritmo, ¿dónde está la inteligencia de esto? Sí, en el algoritmo. Y si esto... Es decir, el código, el cerebro es el algoritmo y lo que le da vida y lo que hace que funcione sería... Es decir, el algoritmo es súper simple, fíjense, que son básicamente 10 líneas de código. Pero lo que le da la... En definitiva, ¿dónde está la clave para que esto funcione? En la tabla de cada ruta. Por eso. Entonces, ¿qué hay que aprender a hacer? ¿Algoritmo de ruteo? Tabla de ruteo. La tabla de ruteo. Claro. Hay que saber rutear. Bien. ¿Qué hay que saber para saber rutear? ¿Qué hay que saber para saber rutear? Preguntarse. ¿A dónde quiero ir? Primero, bajo la base, es decir, la pregunta cero es dónde estoy. Lo primero, ¿no? Es decir, pisar bien, pisar fuerte. Es decir, ¿dónde estoy? ¿A dónde quiero ir? Que sería el destino de ser... ¿Quién me puede llevar al destino? ¿Y quién me puede llevar al destino? ¿Qué característica tiene que tener con respecto a dónde estoy? Que esté en el mismo lugar, que sea un vecino. Tiene que ser vecino. ¿Sí? Entonces, en realidad, lo más importante que tenemos que aprender a hacer, que es lo que a nosotros nos interesa enseñarles, aparte de que hemos aprendido que básicamente el ruteo es cuadrado, como esto, es que hay que tener un ruteo que se pueda hacer en el mismo lugar. ¿Qué significa esto? Es... Ustedes, inicialmente o generalmente, lo que van a tener que hacer, si yo les cambio la red, ¿qué cambia de todo esto que hemos hecho acá? La tabla. Cambia las tablas de ruteo, entonces yo básicamente describo el comportamiento de una red escribiendo las tablas de ruteo y configurando las interfaces. Eso es lo que define el comportamiento de una red. Entonces, tengo que aprender a hacerme las preguntas adecuadas. Y en realidad esto es un problema de lo más común que uno ve en la calle, porque la gente no sabe rutear. La gente no. Las personas que deben tomar la decisión no saben rutear porque confunden los principios básicos. Como nosotros hemos hecho el algoritmo acá, ustedes se dan cuenta que no se puede rutear si no es vecino. Porque voy a arpear por alguien que no está en el cable, entonces no va a andar. Si llevamos este algoritmo a este problema, ¿creen que va a andar? Sí. Sí, sí va a andar. Y acá le falta una sola cosa. Va, le falta una sola cosa. Eh... Dale, dale, que no va a decir. No, no, no. Va a hablar de esa cosa que empieza con G. Con G qué, no. No, o el orden de la mano. Ah, eso, eso, eso, eso, eso, eso. Dale. Claro, pero lo deberíamos introducir. Pregunta, ven ahí, fíjense que gateway, cuando hablamos de gateway, es una palabra bastante sobrecargada, ¿no? Porque en contextos normales, gateway es el gateway hacia el internet, sin aclarar nada. La ruta por default. Acá en gateway estamos hablando de nuestro próximo router que nos lleva hacia un destino que no necesariamente es toda la internet, entre comillas, ¿no? Lo estoy simplificando. ¿Tenemos alguna ruta por default en alguna de esas tablas de ruteo? No. Fíjense, ¿no? Eso es interesante. Estamos ruteando y en realidad, como no tenemos ningún globito que diga internet por ahí, ni algún conjunto muy grande de destinos como para decir, y bueno, hago un fallback y digo, todo esto va por ahí. Podríamos colgarle, lo que sea hacer ejercicio para un router, le podríamos colgar, ponerle a R2, colguémosle una conexión a internet, ¿te parece? Bueno, sí, dale. Y veamos cómo hay que modificar R1. A ver, voy a, bueno, no me entre en otro lado, la voy a poner acá. Sí, ponle ahí una patita. La internet, la internet está acá. Claro. ¿A cuál le querés, al R1? Al R2, colgáselo y vamos a modificar R1 y R2, obviamente. A ver, acabamos de hacer eso, que está lindo el ejercicio que vamos a hacer ahora. Le acabamos de dar un enlace a internet a R2. Bien. Por lo tanto, le acabamos de configurar una interfaz a R2. ¿Cómo deberíamos modificar la tabla de ruteo de R2? Agregamos un vecino más, un link más. Ok, pongámosle, son direcciones públicas, vamos a asumir que R2, para que quede más, eso, cosa así. Oh, qué difícil que sos, Diego, qué raro que sos. Lo digo en broma porque elegí un barra 30. ¿Muy chiquitito? No sé. Es muy chiquitita la máscara, pero está bien. ¿Es casual que Diego haya elegido un barra 30? No, porque si es barra 30 tendría dos hosts nada más. Dos hosts reales con cuatro IPs matemáticamente posibles, ¿no? Sabemos que la primera se reserva para la red, la última para broadcast, que es un medio de internet, que típicamente es. Por lo tanto, la mínima máscara, la máscara más chiquitita que me permite dos vecinos de internet es barra 30. Y como no sobran las IPs, en absoluto, las IPs de cuatro no sobran para nada, bien en nuestro ISP que nos haya dado un barra 30. Ok, vamos a dejarlo ahí porque yo creo que no hace falta poner cuál va a ser la IP de mi router, cuál va a ser. Bueno, bueno, no lo dibujo. ¿Por qué no lo dibujé para no sobrecargar el dibujo? Porque los chicos ya saben. ¿Cuál es la única otra IP posible en esa red? La 2. Bien, ¿por qué no la 0 y por qué no la 3? 0 es de red, 3 es de broadcast. Tienen una misión, ¿no? 0 es reservada, esa te la creo, pero 3 no es reservada, 3 explotaría porque 3 es broadcast. No puedo routear vía broadcast. Una barra 30, tiene dos bits libres al final y eso es justamente, si vos pones todo en uno, te da 3. Bien, edíctennos entonces qué tenemos que poner en R2, que es el que estamos modificando. Ahora y después vamos a propagar, nosotros como vialidad que somos, vamos a ponerle cartelitos a todas las otras bifurcaciones. Pero primero empezamos con la primera, la vamos a pinchar R2. ¿Cuál sería, aferrándonos a los conceptos de las preguntas claves, dónde estoy? Y el 280, 32. No, no, dónde estoy, estoy en R2. En R2. Ok. ¿A dónde quiero ir? A internet. Bueno, pero es un brujo. ¿Cuál es el destino IP? Claro, cuál es el destino. 255, 255, 255, 255. Claro, me tengo que poner a averiguar, ah no, tengo que averiguar la IP de Google y la pongo ahí. Y después averigué la de Facebook. Porque yo tengo que poner una entrada ahí, ese es el punto. Tiene que ser una CIDR. Por cierto, R2 ahí hay que retocarle negro las interfaces, que están todas en el TH0, no sé con qué criterio las estabas... R2... No sé cómo... Ah, este es H0 y este es H1, para ir a la 172 vas por el TH0, para ir a 1 por el TH0... No. Está bien así. Ah, perfecto, ok. Bien, volvamos al problema, esta va a ser el TH2, ¿no? Es la próxima porque tuvimos que pluggear una interfaz nueva, la tercera interfaz. Eso está fácil, pero ¿cuál es el destino? Bien, ahí. Fundamental. Esa es la más simple de todas. La 255 es el gateway. Había dicho, profesor. No, el gateway es, si yo estoy en la red, 32.1/30. ¿Quién es la única? .1/30. .1/30 tiene como posibles números la .0, la .1, la .2 y la .3. Y nada más que eso. Y el destino va a ser siempre la 2, si no te queda otra. No, no, ¿ese es el destino o ese es quien te puede llevar al destino? Estás confundiendo el destino con quien te puede llevar. Claro. La pregunta que tenemos que resolver es la segunda. Por eso acá esto es "use the force", Luke. Siempre haces las mismas preguntas. Porque si no se van a mandar un muco. ¿Dónde estoy? En R2. ¿A dónde quiero ir? ¿Qué es lo que estamos tratando de dar vueltas? De decir, ¿cómo yo puedo, con notación CIDR, describir todos los destinos de Internet? ¿Cuál es la máscara más grande de todas? La máscara que... .1. .0. Que todas sean correspondientes a la red. Claro. Claro, que nada me fije, que no tenga prefijo. Que tenga el prefijo totalmente anulado. De esta manera que me aché de todo. Que yo no le ponga restricción a ese prefijo. Que yo decía, no, todos los que tienen solamente este prefijo. ¿Cuáles son todas las posibles elecciones IP ever? Aquellas que tienen ningún prefijo. Porque yo no fijar el prefijo, le permito que sea cualquiera. Por lo tanto, /0 está bueno. /0. ¿Y qué le ponemos antes de /0? Ah, ya lo puse. Bien. Está bueno. Ahí está. Perfecto. Bien, ¿por cuál interfaz salimos? La 2. La 2, bien. ¿Quién es? Lo ponemos ahí. Ahí sí va, 222. .2. 32. Perfecto. Bien, Mauricio. Vamos a la algoritmo. Igual no debería ir esa entrada al último. Por el tema de que cuando, iterando... ¿Por qué? Cualquiera... ¿Por qué tienen que ir al último? Ah, ¿qué pasó ahí? ¿Por qué tienen que ir al último si...? No, pero está... Estaría bueno que, me parece que estamos hablando... Estamos en una clase uno-tú-no. No sé si toda la gente está... No, yo lo preguntaría... Está excelente la observación y te voy a pedir que te calles un momentito. Porque está muy bueno la observación. Yo tiro ahí, por ejemplo, la... A ver, déjame tomar una. 172, 16, 16, 100. ¿Cuántas entradas "machean" esa entrada? 172, 16, 16, 100. En R2, la que está abajo... Y la anterior, ¿no? En 0, 0. Y la anterior también. Ok, hay dos que "machean". Ahí tenemos una ambigüedad. ¿Cómo desambiguamos eso? ¿Cuál de las dos es la correcta, semánticamente hablando? Es decir, la 172, 16, 16. ¿Y por qué es más correcta esa? Porque es más específica. Bien, porque describe un conjunto más pequeño. Por lo tanto, alguien tomó el esfuerzo de decir... No es todo, este conjuntito en particular va por acá. Entonces respetemos eso. ¿Y cómo deberíamos ordenar la tabla de ruteo... ...tal que se respete que los más específicos estén primero? Y de más específicos, menos específicos. Correcto. ¿Y qué significa eso matemáticamente hablando con los números que tenemos ahí en la tabla? Por la máscara. Por la máscara. Claro, las máscaras más específicas, por lo tanto las máscaras que tienen un número más grande, van al principio. Y las tengo que ordenar. Si no, va a pasar exactamente lo que recién mencionó tu compañero. El que dice "cachazo". Que en realidad, si yo no los ordeno, así voy a tener el problema que... ¡Pum! La entrada más grande me va a machear antes y me va a tirar para cualquier lado. El punto sería, ¿está mal la entrada o está mal ubicada la entrada? Ah, no, yo tengo que tener el cuidado de cargarla en el momento que... Ah, no, la tengo que poner al final para que caiga al final. La entrada, ¿está mal o no estaba en el lugar adecuado? No estaba en el lugar adecuado. Por eso, entonces, yo me tengo que decir, no, en el manual de configuración decirle... No, mirá, tenés que esperar al final de toda la ruta para poner la ruta cero. Le pongo que no ordene por la máscara. Claro, por eso, si no puedo depender del usuario para que esto ande. ¿Qué le cambia el algoritmo entonces? Que es un poco lo que les estaba diciendo. Y primero poner un sort, digamos. Por eso, tengo que decir. Claro, pero hay un detalle, hay un detalle que me gustaría observar. Para mí, el sort es una operación cara. Si alguna vez hicieron algoritmo, saben que el sort es una operación cara. Así que es una operación que se hace en el momento que lo modifico. ¿Por qué? Porque el humano o un cerebro superior modificará e ingresará esas entradas. Y ahí se sortean y se graban ya ordenadas. No el sort en runtime, porque si no, si por cada paquete que tengo que sortear, algo que es estático, para mi punto de vista, como paquete que tengo resolver. En realidad ese sort se hace en el momento en que se cambia. Yo agrego una entrada, entonces en ese momento, cuando el sistema operativo a través de la syscall que me dice agregar entrada, ahí sorteará la tabla y dejará listilla, ordenada adecuadamente para cuando yo venga en runtime, ya esté ordenada y no tendré que hacer el sort con cada búsqueda en runtime. Eso es una optimización casi que obvia. No sé si entienden la diferencia de lo que dice Juanjo, es que no vamos a ordenar la tabla cada vez que ejecute el algoritmo, porque si no estaría gastando ciclo de CPU al cuete. La tabla de ruteo está ordenada al momento de configurar. Al momento de modificarla, porque ya después es estática, hasta que se vuelva a modificar. De hecho la tabla se modifica raramente, define raramente, con baja frecuencia. O la frecuencia de modificación de la tabla es mucho menor que la frecuencia de uso de la tabla. Por lo tanto, más vale sortearla cuando la modifico, ahí ordenarla hasta que cuando la use, que tiene mucho más frecuencia, como la cambio, sea más eficiente. Eso que... Sí, perdón. No, dale, dale, perdón. No, no, dale, porque quería acotar algo tangencial, pero bueno, dale. No, no, no, yo iba a decir una cuestión estructural, pero dale, dale. Díctenos, y ya como para ir cerrando, ¿cuál sería la entrada para...? A ver, pregunta. ¿R1 ya tiene internet? Así lo digo, estamos cansados. ¿Ya tiene internet? ¿R1? Y sus vecinos. No está configurado todavía en la tabla. No tiene. Bien, ok. ¿Qué le falta? Es cuestión de... habría que copiar y pegar la misma entrada, ¿cierto? Hácelo, ahí está, listo, ya está, ahí ya anda. No, no, hay que modificarlo. No, hay que cambiarlo. Ok. No solo el gateway, sino la interfase también. ¿Por dónde se va a internet desde R1? No, más que dos interfaces. Vamos de nuevo, Luke. Use the force. ¿Dónde estoy? En R1. En R1. ¿A dónde quiero ir? A 0, 0, 0, 0. ¿Quién me lleva desde R1 a 0, 0, 0? R2. R2, que vendría siendo... La interfase que apunta hacia mí... De R2 la interfase de la cual yo soy vecino, ¿no? Mi vecindad con R2 me lleva, no R2. Sí, está bien, R2. Pero estrictamente mi vecindad con R2 es la que me lleva, ¿no? Ahí está. Y en R3, ¿quién le podría dar internet? Vamos, Luke. Use the force. ¿Dónde estoy? En su vecindad con R1. En R3. Quiero la respuesta de la pregunta. En R3. ¿A dónde quiero ir? A 0, 0. ¿Quién me puede llevar a 0, 0? R1. R2. La... La R2 de H1. Así. Esta es la verdad de la milanesa del ruteo. El gateway por default, la ruta por default, el gateway de Windows, todo eso es una ilusión óptica. No es una cosa que exista. Es una deformación mental que ustedes han lamentablemente recibido en sus cabezas. Pero no existe el gateway por default. En realidad, es la ruta al destino cero. Miren. Ese es el router de mi casa. Este es el router de la... Cloud. Si yo les pregunto, ¿cuál es... ...el gateway por default? Dice acá en algún lado... Ah, el gateway por default es tal. Dice acá en algún lado, ¿cuál es el gateway por default? Dice default. No, no. Mostrar el IPRU, IPRO, no sé si está mal. Ah, ahora sí. Ah, por eso. Porque dice default, no puede ser. Por eso, no lo quería mostrar. Profe, igual usted dijo que cualquier ruta que me llegue al 0.0.0, ese es como el gateway por default, entre comillas. O sea, esa es la relación que hay, digamos. Esa es la única relación. No existe el otro. No existe tal... Es decir, la palabra default es como si el string default se mapeara 0.0.0 para 0. Claro, aparte si existiera la ruta por default, este algoritmo no funcionaría. Tendríamos que configurar en algún lado la ruta por default. Y yo los invito a que busquen en el libro de Internet Core Protocol, o en el libro de Douglas Comer, en cualquier lado, el algoritmo de ruteo de IP. Y el algoritmo de ruteo de IP es un algoritmo que itera sobre la tabla de ruteo. Entonces, lo que les quiero... Esto es como decirles que los reyes magos no existen, el papá no es el tampoco. No existe, muchachos. No existe la ruta por default. Es decir, no existe un lugar para configurar en un solo lugar y decir "ah, esta es la ruta por default". Solo existe escribir cosas en la tabla de ruteo. La manera de obligar a que todo el tráfico se vaya por un lugar es poner una ruta con máscara cero. Y así funciona. Es decir, si ustedes tienen un Windows, si alguno tiene su Windows ahora pongan, creo que es lo mismo, "route print" pongan. En un Windows. Pongan "route print". Y van a ver que les va a mostrar esta misma tabla. ¿Alguno tiene Windows? Pueden declararlo, no les vamos a hacer nada. Ahí lo dice. No, porque yo le preguntaba porque en realidad no tendría sentido que fuera default. Porque en este caso hay muchas cero, cero, cero, cero. ¿Cómo hay muchas cero, cero? ¿En dónde? Y acá en el gateway, dice. No, pero acá el tema es el destino y la máscara. La máscara es cero. Ah, está bien. No el gateway. Sí, sí, sí. Ahí lo dijo. "Use the force", "Use the force". ¿Dónde estoy? ¿A dónde quiero ir? ¿Quién me puede llevar? Son todas cosas distintas. Bien, perfecto. En serio, se lo hacemos así porque en serio que les va a salvar la vida responderse esas preguntas porque si no se van a confundir. De hecho, recién ustedes confunden quién los puede llevar con dónde quieren ir. Entonces háganse las preguntas, no cuesta nada. Pregúntense a dónde van a ir separado de quién los puede llevar. Y quién los va a llevar es vecino. Entonces, fíjate, acá es a dónde quiero ir es cero, quién me puede llevar es este. Y la máscara es cero, digamos. Estas dos operaciones describen que esto es toda la cacerola. Cero, cero, cero, cero es toda cualquier IP. Y también, ¿por qué les queremos decir que tienen que verlo así? En sistemas operativos sofisticados como estos, como Linux. Y ya con esto les reventamos la cabeza. ¿Qué pasaría si yo tuviera dos conexiones a internet? Si yo tuviera dos internet acá. Habrían dos entradas para cero, cero, cero. ¿Y dónde dice el algoritmo acá que balancee por las dos entradas? ¿Cómo, cómo, cómo? Es decir, ¿cómo podría tener dos entradas? No puede tener dos entradas, va a entrar por una, va a elegir la que esté primera y se la va a pegar. Claro, o sea, tiene dos líneas en la tabla, digamos, dos entradas en la tabla, pero entra por la primera. Y entonces, ¿como si tuviera un solo enlace a internet? ¿Para qué tengo dos conexiones a internet? Quiero tener dos conexiones a internet y entrarlas. Redundancia, no sé, por ahí una no funciona. Eso lo hizo un brujo, no lo hizo un ingeniero. ¿Cómo se implementa la redundancia? ¿Cómo se implementa? ¿No tiene que tener otra tabla para la otra conexión? ¿Otra tabla, dice? A ver. No sé, estoy tirando ideas por tirar ideas. Podríamos dividirla en dos, que vaya la mitad para un lado y la mitad para el otro. ¿Y el algoritmo este qué? ¿Lo tenemos que codear de nuevo, digamos? ¿Se entiende cuál es el punto? Es decir, no puedo tener dos entradas cero. A ver, algunos protocolos yo le puedo poner una métrica acá, le puedo poner un peso y hacer que tome una u otra. Pero la cuestión es, no puedo describir dos caserolas barra cero y decir, bueno, con la que caiga primero. Ahí ya varían mucho las implementaciones, pero la solución en realidad, cuando uno tiene una... es tener otra tabla de ruteo. Tengo dos tablas de ruteo y cada una tiene su ruta a la caserola cero. ¿Está bien? Y le antepongo al algoritmo alguna regla que use una tabla u otra. ¿Se entiende? Es decir, si yo al algoritmo de ruteo, acá arriba digo, a ver, bueno, yo voy a hacer así. Te voy a mirar la IP de la que venís. Y según de dónde venís, por ejemplo, te hago usar una tabla u otra. Es como si te switcheo la tabla de ruteo. Y todo lo demás sigue andando igual. Bueno, eso lo hacen algunos sistemas operativos como el Inun. Se llama policy routing. Pero no cambia el algoritmo de ruteo. Uy, se nos fue el tiempo la miércoles. Bueno, vamos a dejar acá. Es súper importante y yo los invito a que miren esta clase de nuevo. Si alguno no ha entendido algo, la miren de nuevo porque es vital. Voy a cortar la grabación ya. Cofe, una última duda.